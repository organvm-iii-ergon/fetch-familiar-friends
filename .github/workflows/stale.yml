name: Stale Issues and PRs

on:
  schedule:
    # Run every day at 1:00 AM UTC
    - cron: '0 1 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # Issues
          stale-issue-message: |
            üëã This issue has been automatically marked as stale because it has not had recent activity.

            It will be closed in 14 days if no further activity occurs.

            If this issue is still relevant, please:
            - Add a comment to keep it open
            - Add the `keep-open` label
            - Provide additional context or updates

            Thank you for your contributions! üêæ
          close-issue-message: |
            This issue was automatically closed because it has been stale for 14 days with no activity.

            If you believe this issue is still relevant, please reopen it and provide updated information.
          days-before-stale: 60
          days-before-close: 14
          stale-issue-label: 'stale'
          close-issue-label: 'auto-closed'
          exempt-issue-labels: 'keep-open,pinned,security,roadmap,in-progress'

          # Pull Requests
          stale-pr-message: |
            üëã This pull request has been automatically marked as stale because it has not had recent activity.

            It will be closed in 7 days if no further activity occurs.

            If this PR is still being worked on, please:
            - Add a comment with an update
            - Push new commits
            - Request a review
            - Add the `keep-open` label

            Thank you for your contributions! üêæ
          close-pr-message: |
            This pull request was automatically closed because it has been stale for 7 days with no activity.

            If you'd like to continue working on this, please reopen it or create a new PR.
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          close-pr-label: 'auto-closed'
          exempt-pr-labels: 'keep-open,in-review,wip,blocked'

          # Operations
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
